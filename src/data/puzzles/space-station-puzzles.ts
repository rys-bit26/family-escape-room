import type { PuzzleDefinition } from '../../types/puzzle.ts';

export const spaceStationPuzzles: PuzzleDefinition[] = [
  {
    id: 'space-airlock-code',
    roomId: 'space-station',
    type: 'code_entry',
    name: 'Airlock Panel',
    description: 'The airlock control panel requires an access code. A red warning light blinks urgently.',
    data: {
      type: 'code_entry',
      codeLength: 4,
      correctCode: '2001',
      clueText: 'The mission log on the console mentions a famous space odyssey...',
    },
    difficultyOverrides: {
      easy: {
        type: 'code_entry',
        codeLength: 4,
        correctCode: '2001',
        clueText: 'The console reads: "Authorization code: the year of HAL\'s Space Odyssey"',
      },
      hard: {
        type: 'code_entry',
        codeLength: 6,
        correctCode: '200109',
        clueText: 'The odyssey year combined with the day HAL became operational...',
      },
    },
    solution: { type: 'code', code: '2001' },
    hints: [
      { tier: 1, text: 'Read the mission log on the console.', autoShowOnEasy: true },
      { tier: 2, text: 'Think of a famous movie about space and a computer called HAL.' },
      { tier: 3, text: '2001: A Space Odyssey. The code is 2001.' },
    ],
    maxAttempts: { easy: 0, medium: 8, hard: 5 },
    rewardClue: 'The airlock opens! A floating toolkit drifts toward you.',
    rewardItemId: 'space-toolkit',
  },
  {
    id: 'space-nav-pattern',
    roomId: 'space-station',
    type: 'pattern_match',
    name: 'Navigation Console',
    description: 'The navigation system needs a course correction. Input the correct sequence of thrusters.',
    data: {
      type: 'pattern_match',
      symbols: ['red', 'blue', 'green', 'yellow', 'cyan'],
      gridSize: 5,
      correctPattern: ['blue', 'red', 'green', 'cyan', 'yellow'],
    },
    difficultyOverrides: {
      easy: {
        type: 'pattern_match',
        symbols: ['red', 'blue', 'green', 'yellow'],
        gridSize: 4,
        correctPattern: ['blue', 'red', 'green', 'yellow'],
      },
      hard: {
        type: 'pattern_match',
        symbols: ['red', 'blue', 'green', 'yellow', 'cyan', 'purple'],
        gridSize: 6,
        correctPattern: ['blue', 'red', 'green', 'cyan', 'yellow', 'purple'],
      },
    },
    solution: { type: 'pattern', pattern: ['blue', 'red', 'green', 'cyan', 'yellow'] },
    hints: [
      { tier: 1, text: 'The star chart on the wall shows colored waypoints.', autoShowOnEasy: true },
      { tier: 2, text: 'Follow the route from Earth (blue) through each waypoint.' },
      { tier: 3, text: 'Blue, Red, Green, Cyan, Yellow is the thruster sequence.' },
    ],
    maxAttempts: { easy: 0, medium: 6, hard: 4 },
    rewardClue: 'Course corrected! The monitor displays: "Crew count: SEVEN minus TWO = ?"',
  },
  {
    id: 'space-logic',
    roomId: 'space-station',
    type: 'logic_deduction',
    name: 'Crew Manifest',
    description: 'The computer asks you to identify the saboteur from the crew manifest.',
    data: {
      type: 'logic_deduction',
      clues: [
        'The saboteur was not in the engine room at 0800.',
        'Commander Voss was in the bridge all morning.',
        'Dr. Chen was treating a patient in medbay at 0800.',
        'Engineer Park was seen near the damaged panel at 0800.',
        'Pilot Reeves was asleep in crew quarters until 0900.',
      ],
      options: [
        { id: 'voss', label: 'Commander Voss' },
        { id: 'chen', label: 'Dr. Chen' },
        { id: 'park', label: 'Engineer Park' },
        { id: 'reeves', label: 'Pilot Reeves' },
      ],
      correctOptionId: 'park',
    },
    difficultyOverrides: {
      easy: {
        type: 'logic_deduction',
        clues: [
          'The saboteur was seen near the damaged panel at 0800.',
          'Commander Voss was in the bridge all morning.',
          'Dr. Chen was in medbay.',
          'Engineer Park was near the damaged panel at 0800!',
          'Pilot Reeves was asleep.',
        ],
        options: [
          { id: 'voss', label: 'Commander Voss' },
          { id: 'chen', label: 'Dr. Chen' },
          { id: 'park', label: 'Engineer Park' },
          { id: 'reeves', label: 'Pilot Reeves' },
        ],
        correctOptionId: 'park',
      },
      hard: {
        type: 'logic_deduction',
        clues: [
          'The saboteur had access to Section C between 0700 and 0900.',
          'Commander Voss was in a video call with HQ from 0630 to 0830.',
          'Dr. Chen logged into the medbay terminal at 0715 and did not leave until 0930.',
          'Engineer Park requested Section C access at 0745.',
          'Pilot Reeves was in the sleep pod with biometric lock from 2200 to 0900.',
          'The damage occurred between 0800 and 0830 in Section C.',
        ],
        options: [
          { id: 'voss', label: 'Commander Voss' },
          { id: 'chen', label: 'Dr. Chen' },
          { id: 'park', label: 'Engineer Park' },
          { id: 'reeves', label: 'Pilot Reeves' },
        ],
        correctOptionId: 'park',
      },
    },
    solution: { type: 'selection', correctId: 'park' },
    hints: [
      { tier: 1, text: 'Eliminate crew members with confirmed alibis.' },
      { tier: 2, text: 'Who was near the damage at the time it happened?' },
      { tier: 3, text: 'Engineer Park was near the damaged panel at 0800.' },
    ],
    maxAttempts: { easy: 0, medium: 4, hard: 3 },
    rewardClue: 'Saboteur identified! The AI unlocks the escape pod: "Pod code = crew count minus suspects cleared."',
  },
  {
    id: 'space-exit',
    roomId: 'space-station',
    type: 'code_entry',
    name: 'Escape Pod',
    description: 'The escape pod requires a launch code. Time to get off this station!',
    data: {
      type: 'code_entry',
      codeLength: 1,
      correctCode: '5',
      clueText: 'Combine the clues: SEVEN minus TWO is the answer.',
    },
    difficultyOverrides: {
      easy: {
        type: 'code_entry',
        codeLength: 1,
        correctCode: '5',
        clueText: 'The nav console said: crew count SEVEN minus TWO. What is 7 - 2?',
      },
      hard: {
        type: 'code_entry',
        codeLength: 4,
        correctCode: '5309',
        clueText: 'Crew minus suspects, then the saboteur ID reversed...',
      },
    },
    solution: { type: 'code', code: '5' },
    hints: [
      { tier: 1, text: 'Check your journal for numerical clues.' },
      { tier: 2, text: '7 crew members minus 2.' },
      { tier: 3, text: '7 - 2 = 5.' },
    ],
    maxAttempts: { easy: 0, medium: 6, hard: 4 },
    rewardClue: 'The pod launches! You escaped the space station!',
  },
];
